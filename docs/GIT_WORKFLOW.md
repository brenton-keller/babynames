# Git Workflow & Best Practices - Baby Names Analysis Project

Guidelines for version control, collaboration, and repository management for the Baby Names Analysis project.

## üéØ **Repository Philosophy**

This project follows a **research-friendly git workflow** that:
- ‚úÖ **Includes all source code** and documentation
- ‚úÖ **Excludes generated data** (users regenerate with `setup.R`)
- ‚úÖ **Maintains clean history** with meaningful commits
- ‚úÖ **Supports easy collaboration** and deployment

## üìÅ **What's Included in Git**

### **‚úÖ Essential Project Files**
```
# Core source code
R/                           # All analysis and interface code
tests/                       # Validation and testing scripts
examples/                    # Usage examples and demos

# Documentation
README.md                    # Main project overview
docs/                        # Complete documentation suite
CLAUDE.md                    # Claude Code integration guide

# Configuration
setup.R                      # Master setup script
.gitignore                   # Git exclusion rules
```

### **‚ùå Excluded from Git**
```
# Generated data (regenerated by users)
data/raw/                    # SSA downloads (~100MB)
data/processed/              # Classifications (~5MB)
data/cache/                  # Analysis cache

# Environment files
.Rhistory                    # R command history
.RData                       # R workspace
.claude/                     # Claude Code config

# Temporary files
*.html                       # Analysis outputs
temp/                        # Temporary files
```

## üöÄ **Getting Started with Git**

### **For New Contributors**
```bash
# 1. Clone the repository
git clone [repository-url]
cd babynames

# 2. Run complete setup (generates excluded data)
Rscript -e "source('setup.R'); main_setup()"

# 3. Verify everything works
Rscript -e "source('examples/test_fixed_origins.R')"

# 4. Start developing!
```

### **Daily Development Workflow**
```bash
# 1. Start development session
git status                   # Check current state
git pull                     # Get latest changes

# 2. Create feature branch (recommended)
git checkout -b feature/your-improvement

# 3. Make changes and test
Rscript -e "source('examples/test_fixed_origins.R')"

# 4. Commit changes
git add .
git commit -m "Add: your improvement description"

# 5. Share changes
git push origin feature/your-improvement
```

## üìù **Commit Message Standards**

### **Format Template**
```
Type: Brief description (50 chars max)

Detailed explanation if needed:
- What was changed
- Why it was changed
- Any breaking changes

Examples of affected functions:
- analyze_name_origin_simple()
- investigate_name()
```

### **Commit Types**
- **Add**: New features or functions
- **Fix**: Bug fixes and corrections
- **Update**: Improvements to existing features
- **Docs**: Documentation changes only
- **Refactor**: Code reorganization without functionality changes
- **Test**: Adding or updating tests

### **Examples**
```bash
# Good commit messages:
git commit -m "Add: confidence scoring algorithm for origin detection

- Implement multi-factor confidence assessment
- Scoring based on early emergence, consistency, birth volume
- Improves reliability from 0.1-20% to 50-90% range
- Affects find_enhanced_origins() function"

git commit -m "Fix: Oliver classification issue with established names

- Add Oliver to known_established_names list
- Prevents nonsensical 1910 origin analysis
- Update classification thresholds documentation"

git commit -m "Docs: complete API reference for Week 2 functions"

# Avoid:
git commit -m "fixes"
git commit -m "update stuff"
git commit -m "WIP"
```

## üåø **Branching Strategy**

### **Main Branch**
- **`main`** - Production-ready code
- Always passes all tests
- Tagged with version numbers (v1.0.0, v2.0.0)

### **Development Branches**
```bash
# Feature development
feature/enhanced-visualization
feature/machine-learning-integration
feature/web-interface

# Bug fixes
fix/oliver-classification
fix/regional-analysis-error

# Documentation
docs/user-guide-updates
docs/api-reference-expansion
```

### **Branch Workflow**
```bash
# Create feature branch from main
git checkout main
git pull
git checkout -b feature/your-feature

# Develop and test
# ... make changes ...
Rscript -e "source('examples/test_fixed_origins.R')"

# Commit changes
git add .
git commit -m "Add: your feature description"

# Merge back to main (when ready)
git checkout main
git merge feature/your-feature
git push origin main

# Clean up
git branch -d feature/your-feature
```

## üß™ **Testing Before Commits**

### **Required Tests**
```r
# 1. System validation
source("examples/test_fixed_origins.R")

# 2. Data loading verification
source("examples/debug_data_loading.R")

# 3. Known examples validation
source("examples/test_got_names.R")
```

### **Pre-Commit Checklist**
- ‚úÖ All existing tests pass
- ‚úÖ New functions are documented
- ‚úÖ No hardcoded file paths
- ‚úÖ Functions handle missing packages gracefully
- ‚úÖ Code follows project conventions

## üì¶ **Release Management**

### **Version Numbering**
- **Major.Minor.Patch** (e.g., 2.1.0)
- **Major**: Breaking changes or major new features
- **Minor**: New features (backwards compatible)
- **Patch**: Bug fixes only

### **Release Process**
```bash
# 1. Ensure all tests pass
Rscript -e "source('examples/test_fixed_origins.R')"

# 2. Update version in documentation
# - README.md badges
# - CHANGELOG.md entries
# - API_REFERENCE.md version notes

# 3. Create release commit
git add .
git commit -m "Release: v2.1.0 - Enhanced visualization system"

# 4. Tag the release
git tag -a v2.1.0 -m "Version 2.1.0: Enhanced visualization"
git push origin v2.1.0
```

### **Current Version History**
- **v1.0.0** - Week 1 complete: Name classification system
- **v2.0.0** - Week 2 complete: Enhanced origin detection
- **v2.0.1** - Bug fixes: Oliver classification, regional analysis
- **v2.1.0** - *(Planned)* Week 3: Enhanced visualization

## ü§ù **Collaboration Guidelines**

### **Code Review Process**
1. **Create pull request** with clear description
2. **Include test results** in PR description
3. **Document any breaking changes**
4. **Request review** from project maintainers

### **PR Template**
```markdown
## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Documentation update
- [ ] Refactoring

## Testing
- [ ] All existing tests pass
- [ ] New tests added for new functionality
- [ ] Manual testing completed

## Examples
```r
# Show how new functionality works
analyze_name_origin_simple("TestName", "F")
```

## Breaking Changes
List any breaking changes and migration instructions
```

### **Documentation Requirements**
- **All new functions** must have roxygen2 documentation
- **Breaking changes** must be documented in CHANGELOG.md
- **New workflows** should be added to USER_GUIDE.md

## üîß **Development Environment Setup**

### **Recommended Git Configuration**
```bash
# Set up Git identity
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# Useful Git aliases
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit

# Better log format
git config --global alias.lg "log --oneline --decorate --graph --all"
```

### **IDE Integration**
- **RStudio**: Git panel for easy staging and committing
- **VS Code**: Source control integration with Claude Code
- **Command line**: Full git functionality

## üéØ **Repository Maintenance**

### **Regular Maintenance Tasks**
```bash
# Clean up merged branches
git branch --merged | grep -v "\*\|main" | xargs -n 1 git branch -d

# Update documentation
# Check for outdated function examples
# Update version references

# Performance testing
# Ensure setup.R completes in reasonable time
# Test with fresh R environment
```

### **Issue Management**
- **Bug reports**: Include system info and reproduction steps
- **Feature requests**: Include use cases and examples
- **Documentation issues**: Specify which sections need updates

---

## üìö **Quick Reference**

### **Essential Commands**
```bash
git status                   # Check current state
git add -A                   # Stage all changes
git commit -m "message"      # Commit with message
git push origin main         # Push to main branch
git pull                     # Get latest changes
git log --oneline            # View commit history
```

### **Emergency Commands**
```bash
git stash                    # Temporarily save changes
git stash pop                # Restore stashed changes
git checkout -- filename    # Discard changes to file
git reset --hard HEAD~1      # Undo last commit (DANGER!)
```

This git workflow ensures the Baby Names Analysis project remains maintainable, collaborative, and professional while supporting both research and development activities.